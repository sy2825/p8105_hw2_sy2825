---
title: "P8105_hw2_sy2825"
author: "Shuo Yan (sy2825)"
output: github_document
date: "2018-10-02"
---


```{r setup, include = FALSE}
library(tidyverse)
```
# Problem 1
For this problem we will focus on a NYC Transit data. First, let's input and clean the data.

```{r NYC_Transit_data}
NYC_Transit_data = 
  read.csv(file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>%
  select(line:route11, entry, vending, entrance_type, ada) %>%
  mutate(
    entry = ifelse(entry == "YES", TRUE, FALSE)
  )

```
I have imported the data and used `select` function to select the data I need, I have also converted the entry variable from character to a logical variable with `ifelse` function. Now the variables in this dataset are line, station name, station latitude, station longitude, routes served, entry, vending, entrance type, and ADA compliance. And the dimension of this dataset is `r dim(NYC_Transit_data)`. These data are not tidy.

*How many distinct stations are there?

```{r distinct_stations}
nrow(
      distinct(NYC_Transit_data, station_name, line)
        )
```
So there are 465 distinct stations.




*How many stations are ADA compliant?

```{r ADA_compliant}
nrow(
      filter(NYC_Transit_data, ada == TRUE) %>%
      distinct(station_name, line)
        )
```
So there are 84 stations are ADA compliant.

*What proportion of station entrances / exits without vending allow entrance?


```{r vending_proportion} 
nrow(
      filter(NYC_Transit_data, vending == "NO") %>%
      distinct(station_name, line)
        ) / 465 
```
So the proportion is about 21.3%.       

Now let's reformat the data to make route number and route name are distinct variables.

```{r}
NYC_Transit_data_reformat = gather(NYC_Transit_data, key = "route_number", value = "route_name", route1:route11)
```
*How many distinct stations serve the A train? Of the stations that serve the A train, how many are ADA compliant?

```{r Stations_serve_A_train}
nrow(
      filter(NYC_Transit_data_reformat, route_name == "A") %>%
      distinct(station_name, line)
        )
```
So there are 60 distinct stations serve the A train.

```{r A_train_ADA_compliant}
nrow(
     filter(NYC_Transit_data_reformat, route_name == "A", ada == TRUE) %>%
      distinct(station_name, line)
)

```
So 17 of the distinct stations whcih serves the A train are ADA compliant.

